<html>
  <head>
    <title>Exercise6</title>
    <link rel="stylesheet" href="./index.css">
  </head>
  <body>
    <div>商品區</div>
    <div class="products-area"></div>
    <div class="cart-title">購物車</div>
    <button onclick="removeAll()">清空購物車</button>
    <div class="cart"></div>

    <script>
      const product_area = document.querySelector(".products-area");
      const cart = document.querySelector('.cart');

      const products = ["滷肉飯", "貢丸湯", "乾麵"];
      
      // 這個 function 負責把全部的商品都塞進商品區
      function generateProducts() {
        for(let i = 0; i < products.length; i++) {
          const product_name = products[i];
          const product_id = i;
          generateProductItem(product_name, product_id);
        }
      }

      // 這個 function 負責產生單一個商品
      function generateProductItem(product_name, product_id) {
        const product_container = document.createElement('div');
        product_container.classList.add('product-container');

        const product_name_container = document.createElement('div');
        const product_name_text = document.createTextNode(product_name);

        product_name_container.appendChild(product_name_text);

        const add_button = document.createElement('button');
        add_button.addEventListener("click", function() {
          addToCart(product_id);
        });
        add_button.classList.add('add-button');
        const add_button_text = document.createTextNode('加入購物車');

        add_button.appendChild(add_button_text);

        product_container.appendChild(product_name_container);
        product_container.appendChild(add_button);

        product_area.appendChild(product_container);
      }

      function generateCartProductItem(product_id) {
        const product_container = document.createElement('div');
        product_container.classList.add('cart-item');
        const product_name = products[product_id];

        const product_name_text = document.createTextNode(product_name);
        product_container.appendChild(product_name_text);

        return product_container
      }

      function removeAll() {
        cart.innerHTML = '';
      }

      function addToCart(product_id) {
        const product_item = generateCartProductItem(product_id);
        cart.appendChild(product_item);
      }

      generateProducts();
    </script>
  </body>
</html>